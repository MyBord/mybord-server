{"version":3,"sources":["webpack:///./src/spa/app/pages/cantPage/cantPage.tsx","webpack:///./src/spa/app/pages/pageWrapper/pageWrapper.tsx","webpack:///./src/api/api.ts","webpack:///./src/api/promiseWrapper.ts","webpack:///./src/spa/app/pages/cantPage/cantPage.module.less?867f","webpack:///./src/spa/app/pages/cantPage/cantPage.module.less"],"names":["Component","className","animationData","autoplay","loop","size","text","textAlign","gqlString","setHydration","isAnimationComplete","setHydrationStatus","resource","query","PageContent","data","read","isHydrated","fallback","promise","Promise","resolve","body","JSON","stringify","loc","source","a","post","process","env","URI","headers","withCredentials","then","response","get","result","status","suspender","r","e","content","module","i","options","transform","undefined","locals","exports","push"],"mappings":"4FAAA,8DAuBe,sBAAY,CAAEA,UAhBF,WAAM,OAC/B,uBAAKC,UAAW,OACd,gBAAC,IAAY,CACXC,cAAe,EACfC,UAAQ,EACRC,MAAI,EACJC,KAAM,MAER,gBAAC,IAAU,CACTA,KAAK,OACLC,KAAK,yBACLC,UAAU,gB,iCClBhB,qCA+Fe,IAhEK,SAAC,G,IACnBP,EAAA,EAAAA,UACAQ,EAAA,EAAAA,UACA,IAAAC,oBAAA,IAAe,GAAf,EAGA,IAAKD,EAAW,CAkBd,OAjB6B,WACrB,oBAAEE,EAAA,EAAAA,oBAAqBC,EAAA,EAAAA,mBAU7B,OAPA,aAAgB,WACVF,GACFE,GAAmB,KAEpB,CAACA,IAGAD,EACK,gBAACV,EAAS,MAEZ,MAOX,IAAMY,EAAW,IAAIC,MAAML,GAgBrBM,EAA0C,SAAC,G,IAAEJ,EAAA,EAAAA,oBAAqBC,EAAA,EAAAA,mBAChEI,EAAOH,EAASG,KAAKC,OAU3B,OAPA,aAAgB,WACVP,GACFE,GAAmB,KAEpB,CAACA,IAGAD,EACK,gBAACV,EAAS,CAACe,KAAMA,IAEnB,MAGT,OA/BuB,WACf,oBAAEL,EAAA,EAAAA,oBAAqBO,EAAA,EAAAA,WAAYN,EAAA,EAAAA,mBAGzC,OACE,gBAAC,WAAc,CAACO,SAAUD,GAAc,gBAAC,IAAO,OAC9C,gBAACH,EAAW,CACVJ,oBAAqBA,EACrBC,mBAAoBA,Q,kCCrE9B,2CAyBe,KACbE,MARY,SAACL,GACb,IAAMW,EAXI,SAACX,GAAuC,WAAIY,SAAQ,SAACC,GAC/D,IAAMC,EAAOC,KAAKC,UAAU,CAAEX,MAAOL,EAAUiB,IAAIC,OAAOJ,OAK1D,EAAAK,EAAMC,KAAK,UAAUC,EAAQC,IAAIC,IAAOT,EAJzB,CACbU,QAAS,CAAE,eAAgB,oBAC3BC,iBAAiB,IAGhBC,MAAK,SAACC,GAAa,OAAAd,EAAQc,EAASpB,KAAKA,YAI5BqB,CAAI5B,GACpB,MAAO,CACLO,KAAM,YAAeI,Q,mDCXV,aAAIA,GACjB,IACIkB,EADAC,EAAS,UAEPC,EAAYpB,EAAQe,MACxB,SAACM,GACCF,EAAS,UACTD,EAASG,KAEX,SAACC,GACCH,EAAS,QACTD,EAASI,KAGb,MAAO,CACLzB,KAAI,WACF,GAAe,YAAXsB,EACF,MAAMC,EACD,GAAe,UAAXD,EACT,MAAMD,EACD,GAAe,YAAXC,EACT,OAAOD,M,0wxFC7Bf,IAAIK,EAAU,EAAQ,KAEA,iBAAZA,IAAsBA,EAAU,CAAC,CAACC,EAAOC,EAAIF,EAAS,MAOhE,IAAIG,EAAU,CAAC,KAAM,EAErB,eAPIC,EAQJ,gBAAqBC,GAER,EAAQ,GAAR,CAAsEL,EAASG,GAEzFH,EAAQM,SAAQL,EAAOM,QAAUP,EAAQM,S,qBCjB5CC,EAAUN,EAAOM,QAAU,EAAQ,GAAR,EAAkE,IAKrFC,KAAK,CAACP,EAAOC,EAAI,sIAAuI,GAAI,CAAC,QAAU,EAAE,QAAU,CAAC,4EAA4E,MAAQ,GAAG,SAAW,uEAAuE,KAAO,uBAAuB,eAAiB,CAAC,uHAAuH,WAAa,MAGzhBK,EAAQD,OAAS,CAChB,IAAO","file":"16.bundle.js","sourcesContent":["import * as React from 'react';\nimport LottiePlayer from 'lotty/lottiePlayer';\nimport Typography from 'typography/typography';\nimport cantAnimation from 'lotty/lotties/cant.json';\nimport pageWrapper from 'pages/pageWrapper/pageWrapper';\nimport * as styles from './cantPage.module.less';\n\nconst CantPage: React.FC = () => (\n  <div className={styles.div}>\n    <LottiePlayer\n      animationData={cantAnimation}\n      autoplay\n      loop\n      size={600}\n    />\n    <Typography\n      size=\"four\"\n      text=\"Sorry, page not found.\"\n      textAlign=\"center\"\n    />\n  </div>\n);\n\nexport default pageWrapper({ Component: CantPage });\n","// This objective of this wrapper is to create a general api that takes a page of our app\n// along with the GQL query that derives all necessary data for said page and runs that query.\n// The data is then provided to the page to render its necessary components.\n\n// when `setHydration=false`, that means that once our data has been retrieved from the backend\n// and / or our wrapped component (`Component`) has mounted, we DO NOT want to stop our page's\n// spinner / loading animation. This is because there might be additional work that is *still*\n// happening in the background of the wrapped component after data has been drilled, such as a\n// context reducer being mutated.\n\nimport * as React from 'react';\nimport Spinner from 'fallbacks/spinner/spinner';\nimport api from 'api/api';\nimport { GqlString } from 'types/gqlTypes';\nimport { useHydrationContext } from 'context/hydrationContext/hydrationContext';\n\ninterface PageContentProps {\n  isAnimationComplete: boolean;\n  setHydrationStatus: (status: boolean) => void;\n}\n\ninterface Props {\n  Component: React.FC<WrappedComponentProps>;\n  gqlString?: GqlString;\n  setHydration?: boolean;\n}\n\ninterface WrappedComponentProps {\n  data?: any;\n}\n\nconst pageWrapper = ({\n  Component,\n  gqlString,\n  setHydration = true,\n}: Props): React.FC => {\n  // ----- NO DATA IS NEEDED ----- //\n  if (!gqlString) {\n    const NoDataPage: React.FC = () => {\n      const { isAnimationComplete, setHydrationStatus } = useHydrationContext();\n\n      // See *1 in `hydrationContext.tsx`\n      React.useEffect(() => {\n        if (setHydration) {\n          setHydrationStatus(true);\n        }\n      }, [setHydrationStatus]);\n\n      // See *2 in `hydrationContext.tsx`\n      if (isAnimationComplete) {\n        return <Component />;\n      }\n      return null;\n    };\n\n    return NoDataPage;\n  }\n\n  // ----- DATA IS NEEDED ----- //\n  const resource = api.query(gqlString);\n\n  const Page: React.FC = () => {\n    const { isAnimationComplete, isHydrated, setHydrationStatus } = useHydrationContext();\n    // See *1 notes in `hydrationContext.tsx` about why our fallback `Spinner` may not render unless\n    // our app has been hydrated.\n    return (\n      <React.Suspense fallback={isHydrated && <Spinner />}>\n        <PageContent\n          isAnimationComplete={isAnimationComplete}\n          setHydrationStatus={setHydrationStatus}\n        />\n      </React.Suspense>\n    );\n  };\n\n  const PageContent: React.FC<PageContentProps> = ({ isAnimationComplete, setHydrationStatus }) => {\n    const data = resource.data.read();\n\n    // See *1 in `hydrationContext.tsx`\n    React.useEffect(() => {\n      if (setHydration) {\n        setHydrationStatus(true);\n      }\n    }, [setHydrationStatus]);\n\n    // See *2 in `hydrationContext.tsx`\n    if (isAnimationComplete) {\n      return <Component data={data} />;\n    }\n    return null;\n  };\n\n  return Page;\n};\n\nexport default pageWrapper;\n","import axios from 'axios';\nimport promiseWrapper, { PromiseWrapper } from 'api/promiseWrapper';\nimport { GqlString } from 'types/gqlTypes';\n\nexport interface Resource<T> {\n  data: PromiseWrapper<T>;\n}\n\nconst get = (gqlString: GqlString): Promise<any> => new Promise((resolve) => {\n  const body = JSON.stringify({ query: gqlString.loc.source.body });\n  const config = {\n    headers: { 'Content-Type': 'application/json' },\n    withCredentials: true,\n  };\n  axios.post(`http://${process.env.URI}`, body, config)\n    .then((response) => resolve(response.data.data));\n});\n\nconst query = (gqlString: GqlString): Resource<any> => {\n  const promise = get(gqlString);\n  return {\n    data: promiseWrapper(promise),\n  };\n};\n\nexport default {\n  query,\n};\n","// Source:\n// https://reactjs.org/docs/concurrent-mode-suspense.html#what-is-suspense-exactly\n// https://codesandbox.io/s/frosty-hermann-bztrp\n\n/* eslint-disable consistent-return */\n\nexport interface PromiseWrapper<T> {\n  read(): T;\n}\n\nexport default <T>(promise: Promise<T>): PromiseWrapper<T> => {\n  let status = 'pending';\n  let result: T;\n  const suspender = promise.then(\n    (r) => {\n      status = 'success';\n      result = r;\n    },\n    (e) => {\n      status = 'error';\n      result = e;\n    },\n  );\n  return {\n    read() {\n      if (status === 'pending') {\n        throw suspender;\n      } else if (status === 'error') {\n        throw result;\n      } else if (status === 'success') {\n        return result;\n      }\n    },\n  };\n};\n","\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js??ref--9-1!../../../../../node_modules/postcss-loader/src/index.js!../../../../../node_modules/less-loader/dist/cjs.js??ref--9-3!./cantPage.module.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../../node_modules/css-loader/index.js??ref--9-1!../../../../../node_modules/postcss-loader/src/index.js!../../../../../node_modules/less-loader/dist/cjs.js??ref--9-3!./cantPage.module.less\", function() {\n\t\tvar newContent = require(\"!!../../../../../node_modules/css-loader/index.js??ref--9-1!../../../../../node_modules/postcss-loader/src/index.js!../../../../../node_modules/less-loader/dist/cjs.js??ref--9-3!./cantPage.module.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".div___3zLzv {\\n  display: flex;\\n  flex-direction: column;\\n}\\n.div___3zLzv > p {\\n  margin-top: 2rem;\\n  text-align: center;\\n}\\n\", \"\", {\"version\":3,\"sources\":[\"/Users/jemery/dev/mybord/src/spa/app/pages/cantPage/cantPage.module.less\"],\"names\":[],\"mappings\":\"AAAA;EACE,cAAc;EACd,uBAAuB;CACxB;AACD;EACE,iBAAiB;EACjB,mBAAmB;CACpB\",\"file\":\"cantPage.module.less\",\"sourcesContent\":[\".div {\\n  display: flex;\\n  flex-direction: column;\\n}\\n.div > p {\\n  margin-top: 2rem;\\n  text-align: center;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"div\": \"div___3zLzv\"\n};"],"sourceRoot":""}